{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[messages,setMessages]=useState([]);const[inputText,setInputText]=useState('');const handleSend=async()=>{if(inputText.trim()){const userMessage={text:inputText,sender:'user'};setMessages(prev=>[...prev,userMessage]);setInputText('');const botPlaceholder={text:'',sender:'bot',isThinking:false};setMessages(prev=>[...prev,botPlaceholder]);try{const response=await fetch(\"http://192.168.200.67:8000/chat/\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({question:inputText})});const reader=response.body.getReader();const decoder=new TextDecoder(\"utf-8\");let fullResponse=\"\";while(true){const{done,value}=await reader.read();if(done)break;const chunk=decoder.decode(value,{stream:true});fullResponse+=chunk;setMessages(prev=>{const updated=[...prev];updated[updated.length-1]={...updated[updated.length-1],text:fullResponse};return updated;});}}catch(error){console.error('Error communicating with the backend:',error);updateBotMessage('Oops! Something went wrong.');}}};const updateBotMessage=text=>{setMessages(prev=>{const lastMessage=prev[prev.length-1];if(lastMessage.sender==='bot'){return[...prev.slice(0,-1),{...lastMessage,isThinking:false,text}];}return prev;});};useEffect(()=>{const messageList=document.querySelector('.message-list');if(messageList){messageList.scrollTop=messageList.scrollHeight;}},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-title\",children:\"SOP AI Assistant\"}),/*#__PURE__*/_jsx(\"div\",{className:\"message-list\",children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:`message ${msg.sender}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble\",children:[msg.sender==='bot'&&msg.isThinking&&/*#__PURE__*/_jsx(\"span\",{className:\"emoji-loader\",children:\"\\uD83E\\uDD16 AI is processing...\"}),msg.text]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputText,onChange:e=>setInputText(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSend(),placeholder:\"Type your message...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,children:\"Send\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","messages","setMessages","inputText","setInputText","handleSend","trim","userMessage","text","sender","prev","botPlaceholder","isThinking","response","fetch","method","headers","body","JSON","stringify","question","reader","getReader","decoder","TextDecoder","fullResponse","done","value","read","chunk","decode","stream","updated","length","error","console","updateBotMessage","lastMessage","slice","messageList","document","querySelector","scrollTop","scrollHeight","className","children","map","msg","index","type","onChange","e","target","onKeyPress","key","placeholder","onClick"],"sources":["E:/Desktop/Projects/Small Language Models/SOP_project/Flask-React_pdf_based/API/my-app/src/App.js"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n\n  const handleSend = async () => {\n    if (inputText.trim()) {\n      const userMessage = { text: inputText, sender: 'user' };\n      setMessages((prev) => [...prev, userMessage]);\n      setInputText('');\n\n      const botPlaceholder = { text: '', sender: 'bot', isThinking: false };\n      setMessages((prev) => [...prev, botPlaceholder]);\n\n      try {\n        const response = await fetch(\"http://192.168.200.67:8000/chat/\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ question: inputText }),\n        });\n\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder(\"utf-8\");\n        let fullResponse = \"\";\n\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n          const chunk = decoder.decode(value, { stream: true });\n          fullResponse += chunk;\n\n          setMessages((prev) => {\n            const updated = [...prev];\n            updated[updated.length - 1] = { ...updated[updated.length - 1], text: fullResponse };\n            return updated;\n          });\n        }\n      } catch (error) {\n        console.error('Error communicating with the backend:', error);\n        updateBotMessage('Oops! Something went wrong.');\n      }\n    }\n  };\n\n  const updateBotMessage = (text) => {\n    setMessages((prev) => {\n      const lastMessage = prev[prev.length - 1];\n      if (lastMessage.sender === 'bot') {\n        return [...prev.slice(0, -1), { ...lastMessage, isThinking: false, text }];\n      }\n      return prev;\n    });\n  };\n\n  useEffect(() => {\n    const messageList = document.querySelector('.message-list');\n    if (messageList) {\n      messageList.scrollTop = messageList.scrollHeight;\n    }\n  }, [messages]);\n\n  return (\n    <div className=\"chat-container\">\n      <div className=\"chat-title\">SOP AI Assistant</div>\n\n      <div className=\"message-list\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`message ${msg.sender}`}>\n            <div className=\"message-bubble\">\n              {msg.sender === 'bot' && msg.isThinking && (\n                <span className=\"emoji-loader\">ðŸ¤– AI is processing...</span>\n              )}\n              {msg.text}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"input-area\">\n        <input\n          type=\"text\"\n          value={inputText}\n          onChange={(e) => setInputText(e.target.value)}\n          onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n          placeholder=\"Type your message...\"\n        />\n        <button onClick={handleSend}>Send</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}