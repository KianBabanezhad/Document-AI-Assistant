{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[messages,setMessages]=useState([]);const[inputText,setInputText]=useState('');const handleSend=async()=>{if(inputText.trim()){const userMessage={text:inputText,sender:'user'};setMessages(prev=>[...prev,userMessage]);setInputText('');const botPlaceholder={text:'',sender:'bot',isThinking:true};setMessages(prev=>[...prev,botPlaceholder]);try{const res=await axios.post('http://localhost:8000/chat/',{question:inputText});const cleanedResponse=res.data.response.replace(/<think>|<\\/think>/g,'');simulateTyping(cleanedResponse);}catch(error){console.error('Error communicating with the backend:',error);updateBotMessage('Oops! Something went wrong.');}}};const simulateTyping=text=>{let index=0;setMessages(prev=>{const lastMessage=prev[prev.length-1];if(lastMessage.sender==='bot'){return[...prev.slice(0,-1),{...lastMessage,isThinking:false,text:''}];}return prev;});const interval=setInterval(()=>{setMessages(prev=>{const lastMessage=prev[prev.length-1];if(lastMessage.sender==='bot'){return[...prev.slice(0,-1),{...lastMessage,text:text.slice(0,index+1)}];}return prev;});index++;if(index>=text.length){clearInterval(interval);}},30);};const updateBotMessage=text=>{setMessages(prev=>{const lastMessage=prev[prev.length-1];if(lastMessage.sender==='bot'){return[...prev.slice(0,-1),{...lastMessage,isThinking:false,text}];}return prev;});};useEffect(()=>{const messageList=document.querySelector('.message-list');if(messageList){messageList.scrollTop=messageList.scrollHeight;}},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-title\",children:\"SOP AI Assistant\"}),/*#__PURE__*/_jsx(\"div\",{className:\"message-list\",children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:`message ${msg.sender}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"message-bubble\",children:[msg.sender==='bot'&&msg.isThinking&&/*#__PURE__*/_jsx(\"span\",{className:\"emoji-loader\",children:\"\\uD83E\\uDD16 AI is processing...\"}),msg.text]})},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputText,onChange:e=>setInputText(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSend(),placeholder:\"Type your message...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,children:\"Send\"})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","App","messages","setMessages","inputText","setInputText","handleSend","trim","userMessage","text","sender","prev","botPlaceholder","isThinking","res","post","question","cleanedResponse","data","response","replace","simulateTyping","error","console","updateBotMessage","index","lastMessage","length","slice","interval","setInterval","clearInterval","messageList","document","querySelector","scrollTop","scrollHeight","className","children","map","msg","type","value","onChange","e","target","onKeyPress","key","placeholder","onClick"],"sources":["E:/Desktop/Projects/Small Language Models/SOP_project/Flask-React_pdf_based/API/my-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [inputText, setInputText] = useState('');\n\n  const handleSend = async () => {\n    if (inputText.trim()) {\n      const userMessage = { text: inputText, sender: 'user' };\n      setMessages((prev) => [...prev, userMessage]);\n      setInputText('');\n\n      const botPlaceholder = { text: '', sender: 'bot', isThinking: true };\n      setMessages((prev) => [...prev, botPlaceholder]);\n\n      try {\n        const res = await axios.post('http://localhost:8000/chat/', {\n          question: inputText,\n        });\n\n        const cleanedResponse = res.data.response.replace(/<think>|<\\/think>/g, '');\n\n        simulateTyping(cleanedResponse);\n      } catch (error) {\n        console.error('Error communicating with the backend:', error);\n        updateBotMessage('Oops! Something went wrong.');\n      }\n    }\n  };\n\n  const simulateTyping = (text) => {\n    let index = 0;\n\n    setMessages((prev) => {\n      const lastMessage = prev[prev.length - 1];\n      if (lastMessage.sender === 'bot') {\n        return [...prev.slice(0, -1), { ...lastMessage, isThinking: false, text: '' }];\n      }\n      return prev;\n    });\n\n    const interval = setInterval(() => {\n      setMessages((prev) => {\n        const lastMessage = prev[prev.length - 1];\n\n        if (lastMessage.sender === 'bot') {\n          return [\n            ...prev.slice(0, -1),\n            {\n              ...lastMessage,\n              text: text.slice(0, index + 1),\n            },\n          ];\n        }\n        return prev;\n      });\n\n      index++;\n      if (index >= text.length) {\n        clearInterval(interval);\n      }\n    }, 30);\n  };\n\n  const updateBotMessage = (text) => {\n    setMessages((prev) => {\n      const lastMessage = prev[prev.length - 1];\n      if (lastMessage.sender === 'bot') {\n        return [...prev.slice(0, -1), { ...lastMessage, isThinking: false, text }];\n      }\n      return prev;\n    });\n  };\n\n  useEffect(() => {\n    const messageList = document.querySelector('.message-list');\n    if (messageList) {\n      messageList.scrollTop = messageList.scrollHeight;\n    }\n  }, [messages]);\n\n  return (\n    <div className=\"chat-container\">\n      <div className=\"chat-title\">SOP AI Assistant</div>\n\n      <div className=\"message-list\">\n        {messages.map((msg, index) => (\n          <div key={index} className={`message ${msg.sender}`}>\n            <div className=\"message-bubble\">\n              {msg.sender === 'bot' && msg.isThinking && (\n                <span className=\"emoji-loader\">ðŸ¤– AI is processing...</span>\n              )}\n              {msg.text}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"input-area\">\n        <input\n          type=\"text\"\n          value={inputText}\n          onChange={(e) => setInputText(e.target.value)}\n          onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n          placeholder=\"Type your message...\"\n        />\n        <button onClick={handleSend}>Send</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}